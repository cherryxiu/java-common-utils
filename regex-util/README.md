### regex-util

一些常用正则的集合

需要生成以下5个变量：
1. 总银行数                 ：统计出现的不同的银行的个数，例如：交通银行   中国银行   交通银行，则个数为2，即去重后的总个数?
2. 总卡数                   ：统计出现的不同的银行卡尾号****的个数，同样是去重后的总个数
3. 总信用卡数              ：统计出现的信用卡的个数
4. 信用卡总的可用额度       ：统计每个信用卡的最近时间的可用额度，然后求和
5. 需要还给机构的总钱数    ：统计每个机构的最近时间让用户还钱的数额，然后求和


### 需求
正则表达式规则：
需要先查询出来，再用正则匹配，用sql不好操作吧

1. 匹配每条短信的标签    pattern = "[[^[]]{0,}]"，若每条短信中有多个标签，取第一个即可【取短信的标签】
2. 根据1匹配标签中的银行   pattern = "银行"  可求出总银行数  【短信的第一个标签为”银行”的总和】

3. 如果该短信标签中包含"银行"，则匹配银行卡尾号   pattern = "尾号.?[0-9]{4,}"，【找出4位尾号数】
	然后可通过抽取4位尾号数来求得该用户的所有银行卡，pattern = "[0-9]+"【获取尾号数的吧】

4. 在3中如果匹配到银行卡尾号，且同时匹配到信用卡时，将该银行卡尾号标识成信用卡，pattern = "信用卡"，通过信用卡标识可以求得总信用卡数【有银行卡尾号，短信中有“信用卡”文字则为信用卡】
5. 在匹配到银行卡尾号及信用卡标识后，且同时匹配到可用额度等信息，pattern = "可用额度.?.?.?.?-?[0-9]{0,}"，然后提取最近时间的可用额度即可求出信用卡总的可用额度,【截取后找出额度】
可用额度中的数值匹配为  pattern = "-?[0-9]+"
6. 通过1匹配出的所有标签减去包含银行的标签，则认为是机构标签，根据每个机构标签匹配需要还钱等信息， pattern = "应还.?.?.?.?.?.?[0-9]{0,}"和 pattern = "需还.?.?.?.?.?.?[0-9]{0,}"，【需要同时匹配到这两个才可以算’还钱信息’】然后再提取其中的金额数值，pattern = "[0-9]+"，最后根据每个机构的最近时间求出其还钱的金额并求和，最终求出需要还给机构的总钱【数据先按时间升序排列，利用map集合的键不重复的特性，找到最新时间的金额】


流程图可以查看  **微信图片_20181016143712.png)**